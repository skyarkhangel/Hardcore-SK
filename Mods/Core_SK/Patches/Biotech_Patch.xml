<?xml version="1.0" encoding="UTF-8"?>
<Patch>

	<!-- Biotech Patch -->
    <Operation Class="PatchOperation.FindModByID">
		<mods>
			<li>Ludeon.RimWorld.Biotech</li>
		</mods>
        <match Class="PatchOperationSequence">
			<operations>
				<li Class="PatchOperationAdd">
					<xpath>Defs/ThoughtDef[defName="EnvironmentDark"]</xpath>
					<value>
						<nullifyingGenes>
							<li MayRequire="Ludeon.RimWorld.Biotech">DarkVision</li>
						</nullifyingGenes>
					</value>
				</li>
				<li Class="PatchOperationAdd">
					<xpath>Defs/ThoughtDef[defName="Enlighten_Environment_Dark"]</xpath>
					<value>
						<nullifyingGenes>
							<li MayRequire="Ludeon.RimWorld.Biotech">DarkVision</li>
						</nullifyingGenes>
					</value>
				</li>
				<li Class="PatchOperationAdd">
					<xpath>Defs/ThoughtDef[defName="Enlighten_Environment_Bright"]</xpath>
					<value>
						<nullifyingGenes>
							<li MayRequire="Ludeon.RimWorld.Biotech">DarkVision</li>
						</nullifyingGenes>
					</value>
				</li>
				<!-- Since Nyctophobe uses degreeDatas to define nyctophobe & nyctophile, fully suppress this trait might be a bad idea.
				<li Class="PatchOperationAdd">
					<xpath>Defs/GeneDef[defName="DarkVision"]</xpath>
					<value>
						<suppressedTraits>
							<li>
								<def>Nyctophobe</def>
							</li>
						</suppressedTraits>
					</value>
				</li>
				-->
			</operations>
		</match>
    </Operation>
	
</Patch>