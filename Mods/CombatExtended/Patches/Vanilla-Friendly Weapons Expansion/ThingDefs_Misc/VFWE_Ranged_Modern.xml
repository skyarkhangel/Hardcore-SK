<?xml version="1.0" encoding="utf-8" ?>
<Patch>

	<Operation Class="PatchOperationSequence">
		<success>Always</success>
		<operations>
			<li Class="CombatExtended.PatchOperationFindMod">
				<modName>Vanilla-Friendly Weapon Expansion</modName>
			</li>
			<!-- ========== Fifty Cal Rifle ========== -->
			<li Class="CombatExtended.PatchOperationMakeGunCECompatible">
				<defName>Gun_FiftyCalRifle</defName>
				<statBases>
					<Mass>14</Mass>
					<RangedWeapon_Cooldown>1.38</RangedWeapon_Cooldown>
					<SightsEfficiency>3</SightsEfficiency>
					<ShotSpread>0.07</ShotSpread>
					<SwayFactor>1.87</SwayFactor>
					<Bulk>12.5</Bulk>
					<WorkToMake>43500</WorkToMake>
				</statBases>
				<costList>
					<Chemfuel>20</Chemfuel>
					<Steel>85</Steel>
					<Component>6</Component>
				</costList>
				<Properties>
					<verbClass>CombatExtended.Verb_ShootCE</verbClass>
					<hasStandardCommand>true</hasStandardCommand>
					<projectileDef>Bullet_50BMG_FMJ</projectileDef>
					<warmupTime>5.1</warmupTime>
					<range>86</range>
					<soundCast>ShotSniperRifle</soundCast>
					<soundCastTail>GunTail_Heavy</soundCastTail>
					<muzzleFlashScale>9</muzzleFlashScale>
				</Properties>
				<AmmoUser>
					<magazineSize>10</magazineSize>
					<reloadTime>4</reloadTime>
					<ammoSet>AmmoSet_50BMG</ammoSet>
				</AmmoUser>
				<FireModes>
					<aiAimMode>AimedShot</aiAimMode>
				</FireModes>
				<weaponTags>
					<li>CE_AI_Rifle</li>
				</weaponTags>
				<researchPrerequisite>CE_AdvancedFirearms</researchPrerequisite>
			</li>
			<li Class="PatchOperationRemove">
				<xpath>/ThingDefs/ThingDef[defName="Gun_FiftyCalRifle"]/equippedStatOffsets</xpath>
			</li>
			<!-- ========== Improvised Pistol ========== -->
			<li Class="CombatExtended.PatchOperationMakeGunCECompatible">
				<defName>Gun_ImprovisedPistol</defName>
				<statBases>
					<Mass>0.97</Mass>
					<MarketValue>72.499</MarketValue>
					<RangedWeapon_Cooldown>0.36</RangedWeapon_Cooldown>
					<SightsEfficiency>0.7</SightsEfficiency>
					<ShotSpread>0.2</ShotSpread>
					<SwayFactor>1.11</SwayFactor>
					<Bulk>2.35</Bulk>
					<WorkToMake>5000</WorkToMake>
				</statBases>
				<costList>
					<WoodLog>5</WoodLog>
					<Steel>20</Steel>
					<Component>1</Component>
				</costList>
				<Properties>
					<verbClass>CombatExtended.Verb_ShootCE</verbClass>
					<hasStandardCommand>true</hasStandardCommand>
					<projectileDef>Bullet_38Special_FMJ</projectileDef>
					<warmupTime>0.6</warmupTime>
					<range>10</range>
					<soundCast>ShotPistol</soundCast>
					<soundCastTail>GunTail_Light</soundCastTail>
					<muzzleFlashScale>9</muzzleFlashScale>
				</Properties>
				<AmmoUser>
					<magazineSize>5</magazineSize>
					<reloadTime>4.25</reloadTime>
					<ammoSet>AmmoSet_38Special</ammoSet>
				</AmmoUser>
				<FireModes />
				<weaponTags>
					<li>CE_Sidearm</li>
					<li>CE_AI_Pistol</li>
					<li>CE_OneHandedWeapon</li>
				</weaponTags>
			</li>
			<!-- ========== Repeater Rifle ========== -->
			<li Class="CombatExtended.PatchOperationMakeGunCECompatible">
				<defName>Gun_RepeaterRifle</defName>
				<statBases>
					<Mass>4.3</Mass>
					<RangedWeapon_Cooldown>0.76</RangedWeapon_Cooldown>
					<SightsEfficiency>1</SightsEfficiency>
					<ShotSpread>0.02</ShotSpread>
					<SwayFactor>1.68</SwayFactor>
					<Bulk>12.5</Bulk>
					<WorkToMake>11500</WorkToMake>
				</statBases>
				<costList>
					<WoodLog>10</WoodLog>
					<Steel>60</Steel>
					<Component>1</Component>
				</costList>
				<Properties>
					<verbClass>CombatExtended.Verb_ShootCE</verbClass>
					<hasStandardCommand>true</hasStandardCommand>
					<projectileDef>Bullet_44-40Winchester_FMJ</projectileDef>
					<warmupTime>1.1</warmupTime>
					<range>29</range>
					<soundCast>ShotBoltActionRifle</soundCast>
					<soundCastTail>GunTail_Heavy</soundCastTail>
					<muzzleFlashScale>9</muzzleFlashScale>
				</Properties>
				<AmmoUser>
					<magazineSize>10</magazineSize>
					<reloadTime>8.5</reloadTime>
					<ammoSet>AmmoSet_44-40Winchester</ammoSet>
				</AmmoUser>
				<FireModes>
					<aiAimMode>AimedShot</aiAimMode>
				</FireModes>
				<weaponTags>
					<li>CE_AI_Rifle</li>
				</weaponTags>
			</li>
			<!-- ========== Revolver ========== -->
			<li Class="CombatExtended.PatchOperationMakeGunCECompatible">
				<defName>Gun_Revolver</defName>
				<statBases>
					<Mass>1.37</Mass>
					<RangedWeapon_Cooldown>0.39</RangedWeapon_Cooldown>
					<SightsEfficiency>0.7</SightsEfficiency>
					<ShotSpread>0.16</ShotSpread>
					<SwayFactor>1.65</SwayFactor>
					<Bulk>3.57</Bulk>
					<WorkToMake>5000</WorkToMake>
				</statBases>
				<costList>
					<Steel>30</Steel>
					<Component>2</Component>
				</costList>
				<Properties>
					<verbClass>CombatExtended.Verb_ShootCE</verbClass>
					<hasStandardCommand>true</hasStandardCommand>
					<projectileDef>Bullet_44Magnum_FMJ</projectileDef>
					<warmupTime>0.6</warmupTime>
					<range>16</range>
					<soundCast>ShotPistol</soundCast>
					<soundCastTail>GunTail_Light</soundCastTail>
					<muzzleFlashScale>9</muzzleFlashScale>
				</Properties>
				<AmmoUser>
					<magazineSize>6</magazineSize>
					<reloadTime>3.5</reloadTime>
					<ammoSet>AmmoSet_44Magnum</ammoSet>
				</AmmoUser>
				<FireModes />
				<weaponTags>
					<li>CE_Sidearm</li>
					<li>CE_AI_Pistol</li>
					<li>CE_OneHandedWeapon</li>
				</weaponTags>
			</li>
			<!-- ========== Sawn-Off Shotgun ========== -->
			<li Class="CombatExtended.PatchOperationMakeGunCECompatible">
				<defName>Gun_SawnoffShotgun</defName>
				<statBases>
					<Mass>2.3</Mass>
					<RangedWeapon_Cooldown>0.4</RangedWeapon_Cooldown>
					<SightsEfficiency>1</SightsEfficiency>
					<ShotSpread>0.16</ShotSpread>
					<SwayFactor>0.81</SwayFactor>
					<Bulk>5.84</Bulk>
					<WorkToMake>12500</WorkToMake>
				</statBases>
				<costList>
					<WoodLog>5</WoodLog>
					<Steel>40</Steel>
					<Component>2</Component>
				</costList>
				<Properties>
					<verbClass>CombatExtended.Verb_ShootCE</verbClass>
					<hasStandardCommand>true</hasStandardCommand>
					<projectileDef>Bullet_12Gauge_Buck</projectileDef>
					<warmupTime>0.6</warmupTime>
					<range>14</range>
					<soundCast>ShotShotgun</soundCast>
					<soundCastTail>GunTail_Heavy</soundCastTail>
					<muzzleFlashScale>9</muzzleFlashScale>
				</Properties>
				<AmmoUser>
					<magazineSize>2</magazineSize>
					<reloadTime>1.6</reloadTime>
					<ammoSet>AmmoSet_12Gauge</ammoSet>
				</AmmoUser>
				<FireModes />
				<weaponTags>
					<li>CE_AI_AssaultWeapon</li>
				</weaponTags>
			</li>
			<!-- ========== Vintage Assault Rifle ========== -->
			<li Class="CombatExtended.PatchOperationMakeGunCECompatible">
				<defName>Gun_VintageAssaultRifle</defName>
				<statBases>
					<Mass>3.47</Mass>
					<RangedWeapon_Cooldown>0.37</RangedWeapon_Cooldown>
					<SightsEfficiency>1</SightsEfficiency>
					<ShotSpread>0.09</ShotSpread>
					<SwayFactor>1.23</SwayFactor>
					<Bulk>8.8</Bulk>
					<WorkToMake>27000</WorkToMake>
				</statBases>
				<costList>
					<WoodLog>10</WoodLog>
					<Steel>45</Steel>
					<Component>5</Component>
				</costList>
				<Properties>
					<recoilAmount>1.82</recoilAmount>
					<verbClass>CombatExtended.Verb_ShootCE</verbClass>
					<hasStandardCommand>true</hasStandardCommand>
					<projectileDef>Bullet_762x39mmSoviet_FMJ</projectileDef>
					<warmupTime>1.1</warmupTime>
					<range>44</range>
					<burstShotCount>6</burstShotCount>
					<ticksBetweenBurstShots>6</ticksBetweenBurstShots>
					<soundCast>ShotHeavySMG</soundCast>
					<soundCastTail>GunTail_Medium</soundCastTail>
					<muzzleFlashScale>9</muzzleFlashScale>
				</Properties>
				<AmmoUser>
					<magazineSize>30</magazineSize>
					<reloadTime>4</reloadTime>
					<ammoSet>AmmoSet_762x39mmSoviet</ammoSet>
				</AmmoUser>
				<FireModes>
					<aimedBurstShotCount>3</aimedBurstShotCount>
				</FireModes>
				<weaponTags>
					<li>CE_AI_AssaultWeapon</li>
					<li>CE_AI_Rifle</li>
				</weaponTags>
				<researchPrerequisite>CE_AdvancedFirearms</researchPrerequisite>
			</li>
		</operations>
	</Operation>

	<Operation Class="PatchOperationSequence">
		<success>Always</success>
		<operations>
			<li Class="CombatExtended.PatchOperationFindMod">
				<modName>XeoNovaDan's Mod Compendium</modName>
			</li>
			<!-- ========== Fifty Cal Rifle ========== -->
			<li Class="CombatExtended.PatchOperationMakeGunCECompatible">
				<defName>Gun_FiftyCalRifle</defName>
				<statBases>
					<Mass>14</Mass>
					<RangedWeapon_Cooldown>1.38</RangedWeapon_Cooldown>
					<SightsEfficiency>3</SightsEfficiency>
					<ShotSpread>0.07</ShotSpread>
					<SwayFactor>1.87</SwayFactor>
					<Bulk>12.5</Bulk>
					<WorkToMake>43500</WorkToMake>
				</statBases>
				<costList>
					<Chemfuel>20</Chemfuel>
					<Steel>85</Steel>
					<Component>6</Component>
				</costList>
				<Properties>
					<verbClass>CombatExtended.Verb_ShootCE</verbClass>
					<hasStandardCommand>true</hasStandardCommand>
					<projectileDef>Bullet_50BMG_FMJ</projectileDef>
					<warmupTime>5.1</warmupTime>
					<range>86</range>
					<soundCast>ShotSniperRifle</soundCast>
					<soundCastTail>GunTail_Heavy</soundCastTail>
					<muzzleFlashScale>9</muzzleFlashScale>
				</Properties>
				<AmmoUser>
					<magazineSize>10</magazineSize>
					<reloadTime>4</reloadTime>
					<ammoSet>AmmoSet_50BMG</ammoSet>
				</AmmoUser>
				<FireModes>
					<aiAimMode>AimedShot</aiAimMode>
				</FireModes>
				<weaponTags>
					<li>CE_AI_Rifle</li>
				</weaponTags>
				<researchPrerequisite>CE_AdvancedFirearms</researchPrerequisite>
			</li>
			<li Class="PatchOperationRemove">
				<xpath>/ThingDefs/ThingDef[defName = "Gun_FiftyCalRifle"]/equippedStatOffsets</xpath>
			</li>
			<!-- ========== Improvised Pistol ========== -->
			<li Class="CombatExtended.PatchOperationMakeGunCECompatible">
				<defName>Gun_ImprovisedPistol</defName>
				<statBases>
					<Mass>0.97</Mass>
					<MarketValue>72.499</MarketValue>
					<RangedWeapon_Cooldown>0.36</RangedWeapon_Cooldown>
					<SightsEfficiency>0.7</SightsEfficiency>
					<ShotSpread>0.2</ShotSpread>
					<SwayFactor>1.11</SwayFactor>
					<Bulk>2.35</Bulk>
					<WorkToMake>5000</WorkToMake>
				</statBases>
				<costList>
					<WoodLog>5</WoodLog>
					<Steel>20</Steel>
					<Component>1</Component>
				</costList>
				<Properties>
					<verbClass>CombatExtended.Verb_ShootCE</verbClass>
					<hasStandardCommand>true</hasStandardCommand>
					<projectileDef>Bullet_38Special_FMJ</projectileDef>
					<warmupTime>0.6</warmupTime>
					<range>10</range>
					<soundCast>ShotPistol</soundCast>
					<soundCastTail>GunTail_Light</soundCastTail>
					<muzzleFlashScale>9</muzzleFlashScale>
				</Properties>
				<AmmoUser>
					<magazineSize>5</magazineSize>
					<reloadTime>4.25</reloadTime>
					<ammoSet>AmmoSet_38Special</ammoSet>
				</AmmoUser>
				<FireModes />
				<weaponTags>
					<li>CE_Sidearm</li>
					<li>CE_AI_Pistol</li>
					<li>CE_OneHandedWeapon</li>
				</weaponTags>
			</li>
			<!-- ========== Repeater Rifle ========== -->
			<li Class="CombatExtended.PatchOperationMakeGunCECompatible">
				<defName>Gun_RepeaterRifle</defName>
				<statBases>
					<Mass>4.3</Mass>
					<RangedWeapon_Cooldown>0.76</RangedWeapon_Cooldown>
					<SightsEfficiency>1</SightsEfficiency>
					<ShotSpread>0.02</ShotSpread>
					<SwayFactor>1.68</SwayFactor>
					<Bulk>12.5</Bulk>
					<WorkToMake>11500</WorkToMake>
				</statBases>
				<costList>
					<WoodLog>10</WoodLog>
					<Steel>60</Steel>
					<Component>1</Component>
				</costList>
				<Properties>
					<verbClass>CombatExtended.Verb_ShootCE</verbClass>
					<hasStandardCommand>true</hasStandardCommand>
					<projectileDef>Bullet_44-40Winchester_FMJ</projectileDef>
					<warmupTime>1.1</warmupTime>
					<range>29</range>
					<soundCast>ShotBoltActionRifle</soundCast>
					<soundCastTail>GunTail_Heavy</soundCastTail>
					<muzzleFlashScale>9</muzzleFlashScale>
				</Properties>
				<AmmoUser>
					<magazineSize>10</magazineSize>
					<reloadTime>8.5</reloadTime>
					<ammoSet>AmmoSet_44-40Winchester</ammoSet>
				</AmmoUser>
				<FireModes>
					<aiAimMode>AimedShot</aiAimMode>
				</FireModes>
				<weaponTags>
					<li>CE_AI_Rifle</li>
				</weaponTags>
			</li>
			<!-- ========== Revolver ========== -->
			<li Class="CombatExtended.PatchOperationMakeGunCECompatible">
				<defName>Gun_Revolver</defName>
				<statBases>
					<Mass>1.37</Mass>
					<RangedWeapon_Cooldown>0.39</RangedWeapon_Cooldown>
					<SightsEfficiency>0.7</SightsEfficiency>
					<ShotSpread>0.16</ShotSpread>
					<SwayFactor>1.65</SwayFactor>
					<Bulk>3.57</Bulk>
					<WorkToMake>5000</WorkToMake>
				</statBases>
				<costList>
					<Steel>30</Steel>
					<Component>2</Component>
				</costList>
				<Properties>
					<verbClass>CombatExtended.Verb_ShootCE</verbClass>
					<hasStandardCommand>true</hasStandardCommand>
					<projectileDef>Bullet_44Magnum_FMJ</projectileDef>
					<warmupTime>0.6</warmupTime>
					<range>16</range>
					<soundCast>ShotPistol</soundCast>
					<soundCastTail>GunTail_Light</soundCastTail>
					<muzzleFlashScale>9</muzzleFlashScale>
				</Properties>
				<AmmoUser>
					<magazineSize>6</magazineSize>
					<reloadTime>3.5</reloadTime>
					<ammoSet>AmmoSet_44Magnum</ammoSet>
				</AmmoUser>
				<FireModes />
				<weaponTags>
					<li>CE_Sidearm</li>
					<li>CE_AI_Pistol</li>
					<li>CE_OneHandedWeapon</li>
				</weaponTags>
			</li>
			<!-- ========== Sawn-Off Shotgun ========== -->
			<li Class="CombatExtended.PatchOperationMakeGunCECompatible">
				<defName>Gun_SawnoffShotgun</defName>
				<statBases>
					<Mass>2.3</Mass>
					<RangedWeapon_Cooldown>0.4</RangedWeapon_Cooldown>
					<SightsEfficiency>1</SightsEfficiency>
					<ShotSpread>0.16</ShotSpread>
					<SwayFactor>0.81</SwayFactor>
					<Bulk>5.84</Bulk>
					<WorkToMake>12500</WorkToMake>
				</statBases>
				<costList>
					<WoodLog>5</WoodLog>
					<Steel>40</Steel>
					<Component>2</Component>
				</costList>
				<Properties>
					<verbClass>CombatExtended.Verb_ShootCE</verbClass>
					<hasStandardCommand>true</hasStandardCommand>
					<projectileDef>Bullet_12Gauge_Buck</projectileDef>
					<warmupTime>0.6</warmupTime>
					<range>14</range>
					<soundCast>ShotShotgun</soundCast>
					<soundCastTail>GunTail_Heavy</soundCastTail>
					<muzzleFlashScale>9</muzzleFlashScale>
				</Properties>
				<AmmoUser>
					<magazineSize>2</magazineSize>
					<reloadTime>1.6</reloadTime>
					<ammoSet>AmmoSet_12Gauge</ammoSet>
				</AmmoUser>
				<FireModes />
				<weaponTags>
					<li>CE_AI_AssaultWeapon</li>
				</weaponTags>
			</li>
			<!-- ========== Vintage Assault Rifle ========== -->
			<li Class="CombatExtended.PatchOperationMakeGunCECompatible">
				<defName>Gun_VintageAssaultRifle</defName>
				<statBases>
					<Mass>3.47</Mass>
					<RangedWeapon_Cooldown>0.37</RangedWeapon_Cooldown>
					<SightsEfficiency>1</SightsEfficiency>
					<ShotSpread>0.09</ShotSpread>
					<SwayFactor>1.23</SwayFactor>
					<Bulk>8.8</Bulk>
					<WorkToMake>27000</WorkToMake>
				</statBases>
				<costList>
					<WoodLog>10</WoodLog>
					<Steel>45</Steel>
					<Component>5</Component>
				</costList>
				<Properties>
					<recoilAmount>1.82</recoilAmount>
					<verbClass>CombatExtended.Verb_ShootCE</verbClass>
					<hasStandardCommand>true</hasStandardCommand>
					<projectileDef>Bullet_762x39mmSoviet_FMJ</projectileDef>
					<warmupTime>1.1</warmupTime>
					<range>44</range>
					<burstShotCount>6</burstShotCount>
					<ticksBetweenBurstShots>6</ticksBetweenBurstShots>
					<soundCast>ShotHeavySMG</soundCast>
					<soundCastTail>GunTail_Medium</soundCastTail>
					<muzzleFlashScale>9</muzzleFlashScale>
				</Properties>
				<AmmoUser>
					<magazineSize>30</magazineSize>
					<reloadTime>4</reloadTime>
					<ammoSet>AmmoSet_762x39mmSoviet</ammoSet>
				</AmmoUser>
				<FireModes>
					<aimedBurstShotCount>3</aimedBurstShotCount>
				</FireModes>
				<weaponTags>
					<li>CE_AI_AssaultWeapon</li>
					<li>CE_AI_Rifle</li>
				</weaponTags>
				<researchPrerequisite>CE_AdvancedFirearms</researchPrerequisite>
			</li>
		</operations>
	</Operation>

</Patch>